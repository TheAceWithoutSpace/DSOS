{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ben78\\\\Desktop\\\\DSOS\\\\Frontend\\\\dsos\\\\src\\\\Pages\\\\Download.component.js\";\nimport React, { Fragment, useState } from 'react';\nimport axios from 'axios';\nimport Progress from '../components/Progress';\nimport Message from '../components/Message';\n\nconst Download = props => {\n  const [file, setFile] = useState('');\n  const [filename, setFilename] = useState('Choose File');\n  const [message, setMessage] = useState('');\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n\n  const onChange = e => {\n    setFile(e.target.files[0]); // props.file(e.target.files[0]);\n\n    setFilename(e.target.files[0].name);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', file);\n\n    if (file) {\n      try {\n        const res = await axios.post('http://localhost:3000/Request/upload', formData, {\n          headers: {\n            'content-Type': 'multipart/form-data'\n          },\n          onUploadProgress: ProgressEvent => {\n            setUploadPercentage(parseInt(Math.round(ProgressEvent.loaded * 100 / ProgressEvent.total)));\n          }\n        });\n        const file = res.data.file;\n        console.log(res.data.file.id);\n        setMessage('File Uploaded');\n      } catch (err) {// if(err.Download===500)\n        //   {setMessage(\"There Was a problam withe the server\")}\n        // else{\n        //   setMessage(\"err.response.data.msg\")\n        // }\n      }\n    } else {\n      setMessage(\"u need to uplod a file firest\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, message ? /*#__PURE__*/React.createElement(Message, {\n    msg: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 16\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-file mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"custom-file-input\",\n    id: \"customFile\",\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"custom-file-label\",\n    htmlFor: \"customFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, filename)), /*#__PURE__*/React.createElement(Progress, {\n    percentage: uploadPercentage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Upload \",\n    className: \"btn btn-primary btn block mt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Download; // export default class Download extends Component{\n//   constructor(props){\n//     super(props);\n//     this.state={\n//       file:null\n//     }\n//     this.Onsubmit=this.Onsubmit.bind(this);\n//     this.onChange=this.onChange.bind(this);\n//   }\n//   onChange(e) {\n//     console.log(e.target)\n//     this.setState({file:e.target.file});\n//   }\n//   Onsubmit(){\n//       var formData = new FormData();\n//       console.log(this.state.file)\n//       formData.append(\"file\",this.state.file);\n//       axios.post('http://localhost:3000/upload', formData, {\n//           headers: {\n//             'Content-Type': 'multipart/form-data'\n//           }\n//       })\n//   }\n//   render(){\n//       return (\n//                 <div className=\"container\">\n//                   <div className=\"row\">\n//                     <div className=\"col-md-6 m-auto\">\n//                     <h1 className=\"text-center display-4 my-4\"> Upload File</h1>\n//                     {/* <form action=\"http://localhost:3000/upload\" method=\"POST\" encType=\"multipart/form-data\"> */}\n//                     <form>\n//                       <div className=\"custom-file mb-3\">\n//                         <input type=\"file\" name=\"file\" id=\"file\" onChange={this.onChange} className=\"custom-file-label\"/>\n//                           <label htmlFor=\"file\" className=\"custom-file-label\">Chose</label>\n//                       </div>\n//                       <input onClick={this.Onsubmit} value=\"Submit\" className=\" btn btn-primary btn-block\"/>\n//                     </form>\n//                     </div>\n//                   </div>\n//                 </div>\n//               )\n//            }\n//   }\n// constructor(props) {\n//   super(props);\n//   this.state ={\n//       file: null\n//   };\n//   this.onFormSubmit = this.onFormSubmit.bind(this);\n//   this.onChange = this.onChange.bind(this);\n// }\n// onFormSubmit(e){\n//   e.preventDefault();\n//   const formData = new FormData();\n//   formData.append('myfile',this.state.file);\n//   const config = {\n//       headers: {\n//           'content-type': 'multipart/form-data'\n//       }\n//   };\n//   axios.post(\"http://localhost:3000/Request/upload\",formData,config)\n//       .then((response) => {\n//           alert(\"The file is successfully uploaded\");\n//       }).catch((error) => {\n//   });\n// }\n// onChange(e) {\n//   this.setState({file:e.target.files});\n// }\n// class Download extends React.Component {\n//   render() {\n//       return (\n//           <form onSubmit={this.onFormSubmit}>\n//               <h1>File Upload</h1>\n//               <input type=\"file\" className=\"form\" name=\"myImage\" onChange= {this.onChange} />\n//               {console.log(this.state.file)}\n//               <button className=\"upload-button\" type=\"submit\">Upload to DB</button>\n//           </form>\n//       )\n//   }\n// }","map":{"version":3,"sources":["C:/Users/ben78/Desktop/DSOS/Frontend/dsos/src/Pages/Download.component.js"],"names":["React","Fragment","useState","axios","Progress","Message","Download","props","file","setFile","filename","setFilename","message","setMessage","uploadPercentage","setUploadPercentage","onChange","e","target","files","name","onSubmit","preventDefault","formData","FormData","append","res","post","headers","onUploadProgress","ProgressEvent","parseInt","Math","round","loaded","total","data","console","log","id","err"],"mappings":"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","sourcesContent":["import React,{Fragment,useState}from 'react';\r\nimport axios from 'axios';\r\nimport Progress from '../components/Progress'\r\nimport Message from '../components/Message'\r\n\r\nconst Download=(props)=>{\r\n  const[file,setFile]=useState('');\r\n  const [filename,setFilename]=useState('Choose File');\r\n  const [message,setMessage]=useState('')\r\n  const [uploadPercentage,setUploadPercentage]=useState(0);\r\n  \r\n  const onChange=e=>{\r\n    setFile(e.target.files[0]);\r\n    // props.file(e.target.files[0]);\r\n    setFilename(e.target.files[0].name);\r\n  }\r\n  const onSubmit= async e=>{\r\n    e.preventDefault();\r\n    const formData=new FormData();\r\n    formData.append('file',file);\r\n    if(file)\r\n    {\r\n      try{\r\n        const res=await axios.post('http://localhost:3000/Request/upload',formData,{\r\n          headers:{\r\n            'content-Type':'multipart/form-data'\r\n          },\r\n          onUploadProgress:ProgressEvent=>{\r\n            setUploadPercentage(\r\n              parseInt(\r\n                Math.round((ProgressEvent.loaded*100)/ProgressEvent.total)\r\n              ));\r\n          }\r\n        });\r\n        const file=res.data.file;\r\n        console.log(res.data.file.id)\r\n  \r\n        setMessage('File Uploaded');\r\n      }catch(err){\r\n        // if(err.Download===500)\r\n        //   {setMessage(\"There Was a problam withe the server\")}\r\n        // else{\r\n        //   setMessage(\"err.response.data.msg\")\r\n        // }\r\n      }\r\n    }\r\n    else{\r\n      setMessage(\"u need to uplod a file firest\")\r\n    }\r\n    }\r\n  return(\r\n    <Fragment>\r\n      {message?<Message msg={message}/>:null}\r\n      <form onSubmit={onSubmit}>\r\n        <div className='custom-file mb-4'>\r\n          <input type=\"file\" className='custom-file-input' id='customFile' onChange={onChange}/>\r\n          <label className='custom-file-label' htmlFor='customFile'>\r\n            {filename}\r\n          </label>\r\n        </div>\r\n        \r\n        <Progress percentage={uploadPercentage}/>\r\n        <input type='submit' value='Upload ' className=\"btn btn-primary btn block mt\"/>\r\n      </form>\r\n    </Fragment>\r\n  )\r\n}\r\nexport default  Download\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// export default class Download extends Component{\r\n//   constructor(props){\r\n//     super(props);\r\n//     this.state={\r\n//       file:null\r\n//     }\r\n//     this.Onsubmit=this.Onsubmit.bind(this);\r\n//     this.onChange=this.onChange.bind(this);\r\n//   }\r\n  \r\n//   onChange(e) {\r\n//     console.log(e.target)\r\n//     this.setState({file:e.target.file});\r\n//   }\r\n//   Onsubmit(){\r\n//       var formData = new FormData();\r\n//       console.log(this.state.file)\r\n//       formData.append(\"file\",this.state.file);\r\n//       axios.post('http://localhost:3000/upload', formData, {\r\n//           headers: {\r\n//             'Content-Type': 'multipart/form-data'\r\n//           }\r\n//       })\r\n//   }\r\n//   render(){\r\n//       return (\r\n//                 <div className=\"container\">\r\n//                   <div className=\"row\">\r\n//                     <div className=\"col-md-6 m-auto\">\r\n//                     <h1 className=\"text-center display-4 my-4\"> Upload File</h1>\r\n//                     {/* <form action=\"http://localhost:3000/upload\" method=\"POST\" encType=\"multipart/form-data\"> */}\r\n//                     <form>\r\n//                       <div className=\"custom-file mb-3\">\r\n//                         <input type=\"file\" name=\"file\" id=\"file\" onChange={this.onChange} className=\"custom-file-label\"/>\r\n//                           <label htmlFor=\"file\" className=\"custom-file-label\">Chose</label>\r\n//                       </div>\r\n//                       <input onClick={this.Onsubmit} value=\"Submit\" className=\" btn btn-primary btn-block\"/>\r\n//                     </form>\r\n//                     </div>\r\n//                   </div>\r\n//                 </div>\r\n//               )\r\n//            }\r\n//   }\r\n\r\n\r\n\r\n// constructor(props) {\r\n//   super(props);\r\n//   this.state ={\r\n//       file: null\r\n//   };\r\n//   this.onFormSubmit = this.onFormSubmit.bind(this);\r\n//   this.onChange = this.onChange.bind(this);\r\n// }\r\n// onFormSubmit(e){\r\n//   e.preventDefault();\r\n//   const formData = new FormData();\r\n//   formData.append('myfile',this.state.file);\r\n//   const config = {\r\n//       headers: {\r\n//           'content-type': 'multipart/form-data'\r\n//       }\r\n//   };\r\n//   axios.post(\"http://localhost:3000/Request/upload\",formData,config)\r\n//       .then((response) => {\r\n//           alert(\"The file is successfully uploaded\");\r\n//       }).catch((error) => {\r\n//   });\r\n// }\r\n\r\n// onChange(e) {\r\n//   this.setState({file:e.target.files});\r\n// }\r\n// class Download extends React.Component {\r\n\r\n//   render() {\r\n//       return (\r\n//           <form onSubmit={this.onFormSubmit}>\r\n//               <h1>File Upload</h1>\r\n//               <input type=\"file\" className=\"form\" name=\"myImage\" onChange= {this.onChange} />\r\n//               {console.log(this.state.file)}\r\n//               <button className=\"upload-button\" type=\"submit\">Upload to DB</button>\r\n//           </form>\r\n//       )\r\n//   }\r\n// }"]},"metadata":{},"sourceType":"module"}